{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46773750-2567d69edc75d4703fc28c418';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default async function fetchData(param, page =1, per_page = 15) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: param,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: per_page,\n  });\n  \n  return axios\n    .get(`${BASE_URL}?${params}`)\n    .then(res => {\n      return res.data;\n    })\n    .catch(e => {\n      console.log(e.message);\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst list = document.querySelector('.list');\nconst sLightBox = new SimpleLightbox('.list .list-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function fillGallery(arr) {\n  const images = arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"list-item\"><a href=\"${largeImageURL}\">\n            <div class=\"image-box\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\"></div>\n              <ul class=\"description\">\n                <li><p>Likes:</p><span>${likes}</span></li>\n                <li><p>Views:</p><span>${views}</span></li>\n                <li><p>Comments:</p><span>${comments}</span></li>\n                <li><p>Downloads:</p><span>${downloads}</span></li>\n              </ul>\n              \n            </a></li>`\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', images);\n\n  sLightBox.refresh();\n}\nexport function clearGallery() {\n  list.innerHTML = '';\n}\n","import fetchData from './js/pixabay-api.js';\nimport { fillGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst list = document.querySelector('.list');\nconst form = document.querySelector('.searching-form');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\nform.addEventListener('submit', handlerSubmit);\nloadMore.addEventListener('click', onLoadMore);\nlet page = 1;\nlet per_page = 15;\n\nasync function onLoadMore(e) {\n  loadMore.disabled = true;\n  page += 1;\n  loader.style.display = 'block';\n  const request = form.elements.search.value.trim();\n  try {\n    const dataList = await fetchData(request, page);\n    loader.style.display = 'none';\n    fillGallery(dataList.hits);\n    if (page >= dataList.totalHits / per_page) {\n      loadMore.classList.add('visually-hidden');\n      showAlert('the end');\n    }\n    const galleryRect = list.lastElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: galleryRect.height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    showAlert('Ooops...');\n  } finally {\n    loadMore.disabled = false;\n  }\n}\n\nasync function handlerSubmit(e) {\n  e.preventDefault();\n  clearGallery();\n  page = 1;\n  loader.style.display = 'block';\n  const request = e.target.elements.search.value.trim();\n  if (!request) {\n    loader.style.display = 'none';\n    showAlert('error');\n    return;\n  }\n  const dataImages = await fetchData(request);\n  loader.style.display = 'none';\n  if (parseInt(dataImages.totalHits)) {\n    fillGallery(dataImages.hits);\n    loadMore.classList.remove('visually-hidden');\n    if (Math.ceil(dataImages.totalHits / per_page) === 1) {\n      loadMore.classList.add('visually-hidden');\n    }\n  } else {\n    loadMore.classList.add('visually-hidden');\n    clearGallery();\n    showAlert('sorry');\n  }\n}\n\n\nfunction showAlert(type) {\n  let message = '';\n  switch (type) {\n    case 'error':\n      message = 'Request cannot be empty, please, enter text';\n      break;\n    case 'sorry':\n      message =\n        'Sorry, there are no images matching your search query. Please try again!';\n      break;\n    case 'the end':\n      message = \"We're sorry, but you've reached the end of search results.\";\n      break;\n    default:\n      message = type;\n      break;\n  }\n  iziToast.error({\n    title: type === 'error' ? 'Error' : '',\n    message: message,\n    position: 'topRight',\n    maxWidth: '400px',\n    color: '#EF4040',\n    theme: 'dark',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchData","param","page","per_page","params","axios","res","list","sLightBox","SimpleLightbox","fillGallery","arr","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","form","loader","loadMore","handlerSubmit","onLoadMore","e","request","dataList","showAlert","galleryRect","dataImages","type","message","iziToast"],"mappings":"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"}